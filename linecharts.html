<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Worldwide Earthquake stats 2000-2015</title>
        <script src="../lib/d3.v5.min.js"></script>
        <script src="../lib/d3-dsv.min.js"></script>
        <script src="../lib/d3-fetch.min.js"></script>
        <script src="../lib/d3-scale-chromatic.v1.min.js"></script>
        <script src="../lib/d3-tip.min.js"></script>
        <script src="../lib/topojson.v2.min.js"></script>
    </head>
    <body>
        <script src="../lib/d3.v5.min.js"></script>
        <script src="../lib/d3-dsv.min.js"></script>
        <script src="../lib/d3-fetch.min.js"></script>
        <script src="../lib/d3-scale-chromatic.v1.min.js"></script>
        <script src="../lib/d3-tip.min.js"></script>
        <script src="../lib/topojson.v2.min.js"></script>
        <script type="text/javascript">

            d3.dsv(",", "earthquakes.csv", function(data) {
                var parser = d3.timeParse("%Y")
                data.year = parser(data.year)
                return {
                    year: data.year,
                    eight: parseInt(data["8.0+"]),
                    seven: parseInt(data["7_7.9"]),
                    six: parseInt(data["6_6.9"]),
                    five: parseInt(data["5_5.9"]),
                    deaths: parseInt(data["Estimated Deaths"])
                };
            }).then(function(data){
            console.log(data);

            var svg = d3.select("body")
                      .append("svg")
                      .attr("width",1000)
                      .attr("height",2500);

            var movey = 500;

            var xScale = d3.scaleTime()
                    .domain([d3.min(data,function(d){return d.year;}),d3.max(data,function(d){return d.year;})])
                    .range([200,800]);

            var xAxis = d3.axisBottom()
                     .scale(xScale)
                     .ticks(d3.timeYear.every(2));

            //X Axis and Axis Label

            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate(0,"+ 400 +")")
                .call(xAxis);

            svg.append("text")
                    .attr("x",500)
                    .attr("y",50)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015");


            /*var yScaleOne = d3.scaleLinear()
                    .domain([d3.max(data,function(d){ return d.running_total;}),d3.min(data,function(d){ return d.running_total;})])
                    .range([5,h-50]); */

            //titles

            svg.append("text")
                    .attr("x",500)
                    .attr("y",50)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015");

            svg.append("text")
                    .attr("x",500)
                    .attr("y",50+movey)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015 with symbols");

            svg.append("text")
                    .attr("x",500)
                    .attr("y", 50+2*movey)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015 square root scale");

            svg.append("text")
                    .attr("x",500)
                    .attr("y",50+3*movey)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015 log scale");

            //legend1

            var legendspace = 20

            svg.append('rect')
                .attr('y',100)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FFC300');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112)
                    .attr("text-anchor","left")
                    .text("5_5.9");

            svg.append('rect')
                .attr('y',100+legendspace)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','##FF5733');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+legendspace)
                    .attr("text-anchor","left")
                    .text("6_6.9");

            svg.append('rect')
                .attr('y',100+2*legendspace)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#C70039');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+2*legendspace)
                    .attr("text-anchor","left")
                    .text("7_7.9");

            svg.append('rect')
                .attr('y',100+3*legendspace)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#900C3F');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+3*legendspace)
                    .attr("text-anchor","left")
                    .text("8.0+");

            //legend2

            svg.append('rect')
                .attr('y',100+movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FFC300');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+movey)
                    .attr("text-anchor","left")
                    .text("5_5.9");

            svg.append('rect')
                .attr('y',100+legendspace+movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','##FF5733');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+legendspace+movey)
                    .attr("text-anchor","left")
                    .text("6_6.9");

            svg.append('rect')
                .attr('y',100+2*legendspace+movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#C70039');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+2*legendspace+movey)
                    .attr("text-anchor","left")
                    .text("7_7.9");

            svg.append('rect')
                .attr('y',100+3*legendspace+movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#900C3F');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+3*legendspace+movey)
                    .attr("text-anchor","left")
                    .text("8.0+");

            //legend3

            svg.append('rect')
                .attr('y',100+2*movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FFC300');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+2*movey)
                    .attr("text-anchor","left")
                    .text("5_5.9");

            svg.append('rect')
                .attr('y',100+legendspace+2*movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','##FF5733');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+legendspace+2*movey)
                    .attr("text-anchor","left")
                    .text("6_6.9");

            svg.append('rect')
                .attr('y',100+2*legendspace+2*movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#C70039');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+2*legendspace+2*movey)
                    .attr("text-anchor","left")
                    .text("7_7.9");

            svg.append('rect')
                .attr('y',100+3*legendspace+2*movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#900C3F');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+3*legendspace+2*movey)
                    .attr("text-anchor","left")
                    .text("8.0+");

            //legend4

            svg.append('rect')
                .attr('y',100+3*movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FFC300');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+3*movey)
                    .attr("text-anchor","left")
                    .text("5_5.9");

            svg.append('rect')
                .attr('y',100+legendspace+3*movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','##FF5733');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+legendspace+3*movey)
                    .attr("text-anchor","left")
                    .text("6_6.9");

            svg.append('rect')
                .attr('y',100+2*legendspace+3*movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#C70039');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+2*legendspace+3*movey)
                    .attr("text-anchor","left")
                    .text("7_7.9");

            svg.append('rect')
                .attr('y',100+3*legendspace+3*movey)
                .attr('x',800)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#900C3F');

            svg.append("text")
                    .attr("x",840)
                    .attr("y",112+3*legendspace+3*movey)
                    .attr("text-anchor","left")
                    .text("8.0+");











            }); 

            

        </script>
    </body>
</html>