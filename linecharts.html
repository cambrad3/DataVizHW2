<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Worldwide Earthquake stats 2000-2015</title>
        <script src="../lib/d3.v5.min.js"></script>
        <script src="../lib/d3-dsv.min.js"></script>
        <script src="../lib/d3-fetch.min.js"></script>
        <script src="../lib/d3-scale-chromatic.v1.min.js"></script>
        <script src="../lib/d3-tip.min.js"></script>
        <script src="../lib/topojson.v2.min.js"></script>
        <style type="text/css">
            .dotfive{
                fill: #FFC300;
                opacity: 1;
            }

            .dotfiveThree{
                fill: #FFC300;
                opacity: 1;
            }

            .dotfiveFour{
                fill: #FFC300;
                opacity: 1;
            }

            .dotsix{
                fill: #FF5733;
                opacity: 1;
            }

            .dotsixThree{
                fill: #FF5733;
                opacity: 1;
            }

            .dotsixFour{
                fill: #FF5733;
                opacity: 1;
            }

            .dotseven{
                fill: #C70039;
                opacity: 1;
            }

            .dotsevenThree{
                fill: #C70039;
                opacity: 1;
            }

            .dotsevenFour{
                fill: #C70039;
                opacity: 1;
            }

            .doteight{
                fill: #900C3F;
                opacity: 1;
            }

            .doteightThree{
                fill: #900C3F;
                opacity: 1;
            }

            .doteightFour{
                fill: #900C3F;
                opacity: 1;
            }

        </style>
    </head>
    <body>
        <script src="../lib/d3.v5.min.js"></script>
        <script src="../lib/d3-dsv.min.js"></script>
        <script src="../lib/d3-fetch.min.js"></script>
        <script src="../lib/d3-scale-chromatic.v1.min.js"></script>
        <script src="../lib/d3-tip.min.js"></script>
        <script src="../lib/topojson.v2.min.js"></script>
        <script type="text/javascript">

            d3.dsv(",", "earthquakes.csv", function(data) {
                var parser = d3.timeParse("%Y")
                data.year = parser(data.year)
                return {
                    year: data.year,
                    eight: parseInt(data["8.0+"]),
                    seven: parseInt(data["7_7.9"]),
                    six: parseInt(data["6_6.9"]),
                    five: parseInt(data["5_5.9"]),
                    deaths: parseInt(data["Estimated Deaths"])
                };
            }).then(function(data){

            var svg = d3.select("body")
                      .append("svg")
                      .attr("width",1000)
                      .attr("height",2000);

            var movey = 500;

            var xScale = d3.scaleTime()
                    .domain([d3.min(data,function(d){return d.year;}),d3.max(data,function(d){return d.year;})])
                    .range([200,800]);

            var xAxis = d3.axisBottom()
                     .scale(xScale)
                     .ticks(d3.timeYear.every(2));

            var rScale = d3.scaleLinear()
                    .domain([d3.min(data,function(d){return d.deaths;}),d3.max(data,function(d){return d.deaths;})])
                    .range([3,10]);

            var yvalues = [];

            data.forEach(function(d){
                yvalues.push(d.eight)
                yvalues.push(d.seven)
                yvalues.push(d.six)
                yvalues.push(d.five)
            });


            data.forEach(function(d){
                if(d.eight==0){
                    d.eightTwo=1
                } else {
                    d.eightTwo=d.eight
                }
            });


            var yScaleOneTwo = d3.scaleLinear()
                    .domain([d3.max(yvalues),d3.min(yvalues)])
                    .range([100,400]);

            var yAxisOneTwo = d3.axisLeft()
                              .scale(yScaleOneTwo)
                              .ticks();

            var yScaleThree = d3.scaleSqrt()
                    .domain([d3.max(yvalues),d3.min(yvalues)])
                    .range([100,400]);

            var yAxisThree = d3.axisLeft()
                              .scale(yScaleThree)
                              .ticks();

            var yScaleFour = d3.scaleLog()
                    .domain([d3.max(yvalues),1])
                    .range([100,400]);

            var yAxisFour = d3.axisLeft()
                              .scale(yScaleFour)
                              .ticks();

             //Y Axis and Axis Label

            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate("+ 200 +",0)")
                .call(yAxisOneTwo);

            svg.append("text")
                .attr("x",150)
                .attr("y",250)
                .attr('text-anchor',"middle")
                .attr("transform","rotate(-90,150,250)")
                .text('Num of Earthquakes')

            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate("+ 200 +",500)")
                .call(yAxisOneTwo);

            svg.append("text")
                .attr("x",150)
                .attr("y",750)
                .attr('text-anchor',"middle")
                .attr("transform","rotate(-90,150,750)")
                .text('Num of Earthquakes')                

            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate("+ 200 +",1000)")
                .call(yAxisThree);

            svg.append("text")
                .attr("x",150)
                .attr("y",1250)
                .attr('text-anchor',"middle")
                .attr("transform","rotate(-90,150,1250)")
                .text('Num of Earthquakes')  

            svg.append("text")
                .attr("x",150)
                .attr("y",1750)
                .attr('text-anchor',"middle")
                .attr("transform","rotate(-90,150,1750)")
                .text('Num of Earthquakes')

            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate("+ 200 +",1500)")
                .call(yAxisFour);  

            //X Axis and Axis Label

            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate(0,"+ 400 +")")
                .call(xAxis);

            svg.append("text")
                    .attr("x",500)
                    .attr("y",440)
                    .attr("text-anchor","middle")
                    .text("Year");

            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate(0,"+ 900 +")")
                .call(xAxis);

            svg.append("text")
                    .attr("x",500)
                    .attr("y",440+movey)
                    .attr("text-anchor","middle")
                    .text("Year");

            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate(0,"+ 1400 +")")
                .call(xAxis);

            svg.append("text")
                    .attr("x",500)
                    .attr("y",440+2*movey)
                    .attr("text-anchor","middle")
                    .text("Year");
            
            svg.append("g")
                .attr("class","axis")
                .attr("transform","translate(0,"+ 1900 +")")
                .call(xAxis);

            svg.append("text")
                    .attr("x",500)
                    .attr("y",440+3*movey)
                    .attr("text-anchor","middle")
                    .text("Year"); 


            //Lines plot 1 and 2

            var lineOneTwoPointFive = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleOneTwo(d.five)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineOneTwoPointFive)
               .attr("transform","translate(0,0)")
               .style("fill","none")
               .style("stroke","#FFC300")
               .style("stroke-width",1.5);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineOneTwoPointFive)
               .attr("transform","translate(0,500)")
               .style("fill","none")
               .style("stroke","#FFC300")
               .style("stroke-width",1.5);

            svg.selectAll(".dotfive")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotfive")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleOneTwo(d.five)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,500)");

            var lineOneTwoPointSix = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleOneTwo(d.six)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineOneTwoPointSix)
               .attr("transform","translate(0,0)")
               .style("fill","none")
               .style("stroke","#FF5733")
               .style("stroke-width",1.5)

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineOneTwoPointSix)
               .attr("transform","translate(0,500)")
               .style("fill","none")
               .style("stroke","#FF5733")
               .style("stroke-width",1.5)

            svg.selectAll(".dotsix")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotsix")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleOneTwo(d.six)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,500)");

            var lineOneTwoPointSeven = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleOneTwo(d.seven)})
                .curve(d3.curveMonotoneX)

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineOneTwoPointSeven)
               .attr("transform","translate(0,0)")
               .style("fill","none")
               .style("stroke","#C70039")
               .style("stroke-width",1.5)

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineOneTwoPointSeven)
               .attr("transform","translate(0,500)")
               .style("fill","none")
               .style("stroke","#C70039")
               .style("stroke-width",1.5)

            svg.selectAll(".dotseven")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotseven")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleOneTwo(d.seven)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,500)");

            var lineOneTwoPointEight = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleOneTwo(d.eight)})
                .curve(d3.curveMonotoneX)

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineOneTwoPointEight)
               .attr("transform","translate(0,0)")
               .style("fill","none")
               .style("stroke","#900C3F")
               .style("stroke-width",1.5)

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineOneTwoPointEight)
               .attr("transform","translate(0,500)")
               .style("fill","none")
               .style("stroke","#900C3F")
               .style("stroke-width",1.5)

            svg.selectAll(".doteight")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","doteight")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleOneTwo(d.eight)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,500)");

            //lines plot 3
            var lineThreePointFive = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleThree(d.five)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineThreePointFive)
               .attr("transform","translate(0,1000)")
               .style("fill","none")
               .style("stroke","#FFC300")
               .style("stroke-width",1.5);

            svg.selectAll(".dotfiveThree")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotfiveThree")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleThree(d.five)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,1000)");

            var lineThreePointSix = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleThree(d.six)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineThreePointSix)
               .attr("transform","translate(0,1000)")
               .style("fill","none")
               .style("stroke","#FF5733")
               .style("stroke-width",1.5);

            svg.selectAll(".dotsixThree")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotsixThree")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleThree(d.six)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,1000)");

            var lineThreePointSeven = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleThree(d.seven)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineThreePointSeven)
               .attr("transform","translate(0,1000)")
               .style("fill","none")
               .style("stroke","#C70039")
               .style("stroke-width",1.5);

            svg.selectAll(".dotsevenThree")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotsevenThree")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleThree(d.seven)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,1000)");

            var lineThreePointEight = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleThree(d.eight)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineThreePointEight)
               .attr("transform","translate(0,1000)")
               .style("fill","none")
               .style("stroke","#900C3F")
               .style("stroke-width",1.5);

            svg.selectAll(".doteightThree")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","doteightThree")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleThree(d.eight)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,1000)");

            //lines plot 4

            var lineFourPointFive = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleFour(d.five)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineFourPointFive)
               .attr("transform","translate(0,1500)")
               .style("fill","none")
               .style("stroke","#FFC300")
               .style("stroke-width",1.5);

            svg.selectAll(".dotfiveFour")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotfiveFour")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleFour(d.five)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,1500)");

            var lineFourPointSix = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleFour(d.six)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineFourPointSix)
               .attr("transform","translate(0,1500)")
               .style("fill","none")
               .style("stroke","#FF5733")
               .style("stroke-width",1.5);

            svg.selectAll(".dotsixFour")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotsixFour")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleFour(d.six)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,1500)");

            var lineFourPointSeven = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleFour(d.seven)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineFourPointSeven)
               .attr("transform","translate(0,1500)")
               .style("fill","none")
               .style("stroke","#C70039")
               .style("stroke-width",1.5);

            svg.selectAll(".dotsevenFour")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","dotsevenFour")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleFour(d.seven)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,1500)");

            var lineFourPointEight = d3.line()
                .x(function(d){return xScale(d.year);})
                .y(function(d){return yScaleFour(d.eightTwo)})
                .curve(d3.curveMonotoneX);

            svg.append("path")
               .datum(data)
               .attr("class","line")
               .attr("d",lineFourPointEight)
               .attr("transform","translate(0,1500)")
               .style("fill","none")
               .style("stroke","#900C3F")
               .style("stroke-width",1.5);

            svg.selectAll(".doteightFour")
                .data(data)
                .enter()
                .append("circle")
                .attr("class","doteightFour")
                .attr("cx",function(d){return xScale(d.year)})
                .attr("cy",function(d){return yScaleFour(d.eightTwo)})
                .attr("r",function(d){return rScale(d.deaths)})
                .attr("transform","translate(0,1500)");

            //titles

            svg.append("text")
                    .attr("x",500)
                    .attr("y",50)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015");

            svg.append("text")
                    .attr("x",500)
                    .attr("y",50+movey)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015 with symbols");

            svg.append("text")
                    .attr("x",500)
                    .attr("y", 50+2*movey)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015 square root scale");

            svg.append("text")
                    .attr("x",500)
                    .attr("y",50+3*movey)
                    .attr("text-anchor","middle")
                    .text("Worldwide Earthquake stats 2000-2015 log scale");

            //legend1

            var legendspace = 20

            svg.append('rect')
                .attr('y',100)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FFC300');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112)
                    .attr("text-anchor","left")
                    .text("5_5.9");

            svg.append('rect')
                .attr('y',100+legendspace)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FF5733');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+legendspace)
                    .attr("text-anchor","left")
                    .text("6_6.9");

            svg.append('rect')
                .attr('y',100+2*legendspace)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#C70039');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+2*legendspace)
                    .attr("text-anchor","left")
                    .text("7_7.9");

            svg.append('rect')
                .attr('y',100+3*legendspace)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#900C3F');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+3*legendspace)
                    .attr("text-anchor","left")
                    .text("8.0+");

            //legend2

            svg.append('rect')
                .attr('y',100+movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FFC300');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+movey)
                    .attr("text-anchor","left")
                    .text("5_5.9");

            svg.append('rect')
                .attr('y',100+legendspace+movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FF5733');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+legendspace+movey)
                    .attr("text-anchor","left")
                    .text("6_6.9");

            svg.append('rect')
                .attr('y',100+2*legendspace+movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#C70039');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+2*legendspace+movey)
                    .attr("text-anchor","left")
                    .text("7_7.9");

            svg.append('rect')
                .attr('y',100+3*legendspace+movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#900C3F');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+3*legendspace+movey)
                    .attr("text-anchor","left")
                    .text("8.0+");

            //legend3

            svg.append('rect')
                .attr('y',100+2*movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FFC300');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+2*movey)
                    .attr("text-anchor","left")
                    .text("5_5.9");

            svg.append('rect')
                .attr('y',100+legendspace+2*movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FF5733');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+legendspace+2*movey)
                    .attr("text-anchor","left")
                    .text("6_6.9");

            svg.append('rect')
                .attr('y',100+2*legendspace+2*movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#C70039');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+2*legendspace+2*movey)
                    .attr("text-anchor","left")
                    .text("7_7.9");

            svg.append('rect')
                .attr('y',100+3*legendspace+2*movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#900C3F');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+3*legendspace+2*movey)
                    .attr("text-anchor","left")
                    .text("8.0+");

            //legend4

            svg.append('rect')
                .attr('y',100+3*movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FFC300');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+3*movey)
                    .attr("text-anchor","left")
                    .text("5_5.9");

            svg.append('rect')
                .attr('y',100+legendspace+3*movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#FF5733');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+legendspace+3*movey)
                    .attr("text-anchor","left")
                    .text("6_6.9");

            svg.append('rect')
                .attr('y',100+2*legendspace+3*movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#C70039');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+2*legendspace+3*movey)
                    .attr("text-anchor","left")
                    .text("7_7.9");

            svg.append('rect')
                .attr('y',100+3*legendspace+3*movey)
                .attr('x',810)
                .attr('width',30)
                .attr('height',15)
                .attr('fill','#900C3F');

            svg.append("text")
                    .attr("x",850)
                    .attr("y",112+3*legendspace+3*movey)
                    .attr("text-anchor","left")
                    .text("8.0+");











            }); 

            

        </script>
    </body>
</html>